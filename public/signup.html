<!-- chat.html -->
<!DOCTYPE html>
<head>
  <title>My jQuery Page</title>
  <script src="jquery-2.1.1.js"></script>
  <script src="handlebars-v2.0.0.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

</head>
<body>

  <div class='sixteen columns'>
    <h3>Sign Up!</h3>

    <form>
      <label>User Name:</label>
      <input name="username" type="text" />
      <label>Password:</label>
      <input name="password" type="password" />
      <input type="submit" value="Sign Up">
    </form>
  </div>

</body>

<script type="text/javascript">

  function executeSignUpQuery(user, pw) {
    data = {}
    data.username = user
    data.password = pw

    var url = "http://chat.api.mks.io/signup"

    $.post(url, data)
      .done(function(status) {
        console.log("Success! Created New User: " + user)
        window.location = window.location.href.replace('signup.html', '') + 'chat.html'

      })
      .fail(function(error) {
        //var errorObj = JSON.parse(error.responseText)
        console.log("There was an error");
        window.location = window.location.href.replace('signup.html', '')       
      })
  }



  $(document).ready(function()
  {
    $('form').submit(function(e)
    {
      e.preventDefault()
      executeSignUpQuery($( "input[name='username']" ).val(), $( "input[name='password']" ).val())
    });
});

</script>